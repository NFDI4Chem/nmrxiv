import{_ as w,bk as k,ah as S,a$ as M,bl as C,x as I,bm as g,l as m,o as l,n,a as h,w as D,m as e,t as u,s as _,q as y,u as f,c as V,p as c,aC as P,aF as j}from"./app.e0b65b09.js";import{L as B}from"./LoadingButton.919b020e.js";const T={props:["study","project","team","members","availableRoles","studyPermissions","studyRole"],components:{LoadingButton:B,StudyContent:k,ToolTip:S,PlusSmIcon:M,slider:C},data(){return{smiles:"",percentage:1,editor:"",license:{},loading:!1}},setup(){const i=I("emitter");return{openStudyDetailsPane:()=>{i.emit("openStudyDetails",{})}}},mounted(){this.$nextTick(()=>{this.editor=g.StructureEditor.createSVGEditor("structureSearchEditor",1)})},beforeMount(){this.license.title="No license selected",this.study.license_id&&(this.loading=!0,axios.get(route("console.license.getLicensebyId",this.study.license_id)).then(i=>{this.license=i.data[0]}).finally(()=>{this.loading=!1}))},methods:{loadSmiles(){this.smiles&&this.smiles!=""&&this.editor.setSmiles(this.smiles)},getSVGString(i){if(i.MOL)return g.Molecule.fromMolfile(`
  `+i.MOL.replaceAll('"',"")).toSVG(200,200);console.log(i)},saveMolecule(){let i=this.editor.getMolFile();axios.post("https://www.cheminfo.org/webservices/inchi","molfile="+i).then(s=>{let o=s.data.output.InChI,r=s.data.output.InChIKey,a=this.editor.getMolecule().getMolecularFormula().formula;axios.post("/dashboard/studies/"+this.study.id+"/molecule",{InChI:o,InChIKey:r,percentage:this.percentage,formula:a,mol:i}).then(d=>{this.study.sample.molecules=d.data,this.smiles="",this.percentage=0,this.editor.setSmiles("")})})}},computed:{getMax(){if(this.study){let i=0;return this.study.sample.molecules.forEach(s=>{i+=parseInt(s.pivot.percentage_composition)}),console.log(i),100-i}else return 100}}},L={class:"divide-y divide-gray-200 sm:col-span-9"},E={class:"py-3 px-4 sm:p-6 lg:pb-8"},F={class:"mt-0"},N={class:"mb-4"},R={class:"relative"},A=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})],-1),z={class:"relative flex items-center justify-between"},H=e("span",{class:"pr-3 text-lg bg-white font-medium text-gray-500"}," Description ",-1),G=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",class:"w-4 h-4 mr-2 text-gray-600"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),K=e("span",null,"Edit",-1),O=[G,K],U={class:"mt-1 text-md text-gray-900 space-y-5"},q={class:"mb-4"},J={class:"relative"},Q=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})],-1),W={class:"relative flex items-center justify-between"},X=e("span",{class:"pr-3 text-lg bg-white font-medium text-gray-500"}," Tags ",-1),Y=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",class:"w-4 h-4 mr-2 text-gray-600"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),Z=e("span",null,"Edit",-1),$=[Y,Z],ee={class:"mt-1 text-md text-gray-900 space-y-5"},te={class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-indigo-100 text-indigo-800"},se=e("svg",{class:"-ml-0.5 mr-1.5 h-2 w-2 text-indigo-400",fill:"currentColor",viewBox:"0 0 8 8"},[e("circle",{cx:"4",cy:"4",r:"3"})],-1),oe={class:"mb-4"},ie={class:"relative"},le=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})],-1),ne={class:"relative flex items-center justify-between"},re=e("span",{class:"pr-3 text-lg bg-white font-medium text-gray-500"}," License ",-1),ae=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",class:"w-4 h-4 mr-2 text-gray-600"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),de=e("span",null,"Edit",-1),ce=[ae,de],ue={key:0,class:"text-md text-gray-900 space-y-5"},me={class:"mb-4"},he={class:"relative"},ge=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})],-1),_e={class:"relative flex items-center justify-between"},ye=e("span",{class:"pr-3 text-lg bg-white font-medium text-gray-500"}," Sample details ",-1),fe=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1),xe=e("span",null,"Save",-1),ve=[fe,xe],be=e("section",{"aria-labelledby":"activity-title",class:"mt-2 xl:mt-2"},[e("div",null,[e("div",{class:"pt-3"},[e("div",null,[e("label",{for:"about",class:"block text-sm font-medium text-gray-700"}," Sample Collection Protocol "),e("div",{class:"mt-1"},[e("textarea",{readonly:"",id:"about",name:"about",rows:"3",class:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-300 rounded-md"})]),e("p",{class:"mt-2 text-sm text-gray-500"}," Describe your sample collection protocol. Protocol parameters can be provided below. ")])])])],-1),pe=e("div",{class:"py-4 max-w-7xl mx-auto"},[e("div",{class:"pb-3 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Structures ")])],-1),we={class:"grid grid-cols-2 gap-2"},ke={class:"pr-2"},Se={key:0,class:"flow-root"},Me={role:"list",class:"-mb-8"},Ce={class:"relative pb-8"},Ie=e("span",{class:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},null,-1),De={class:"relative flex items-start space-x-3"},Ve={key:0,class:"relative"},Pe=["src"],je={class:"min-w-0 flex-1"},Be={class:"text-sm"},Te={class:"font-medium text-gray-900"},Le={class:"mt-2 text-sm text-gray-700"},Ee={class:"rounded-md border my-3 flex justify-center items-center"},Fe=["innerHTML"],Ne={key:1},Re=e("div",{class:"text-center my-10 py-10"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})]),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"}," No structures associated with the sample yet! "),e("p",{class:"mt-1 text-sm text-gray-500"}," Get started by adding a new molecule. ")],-1),Ae=[Re],ze={class:"pl-2"},He={class:"sm:col-span-4"},Ge=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," SMILES ",-1),Ke={class:"mt-1 mb-2"},Oe=e("div",{class:"relative"},[e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center"},[e("span",{class:"px-2 bg-white text-sm text-gray-500"}," Or ")])],-1),Ue=e("div",{class:"w-full border my-4 rounded-md",style:{height:"400px"},id:"structureSearchEditor"},null,-1),qe={class:"mt-1 mb-6"},Je={for:"email",class:"block text-sm font-medium text-gray-700"},Qe={key:0},We={key:0},Xe=e("template",null,[e("button",{type:"button",class:"relative block w-full border-2 border-gray-300 border-dashed rounded-lg p-12 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),e("span",{class:"mt-2 block text-sm font-medium text-gray-900"}," Create a new database ")])],-1),Ye=[Xe],Ze={key:1};function $e(i,s,o,r,a,d){const x=m("loading-button"),v=m("ToolTip"),b=m("slider"),p=m("study-content");return l(),n("div",null,[h(p,{model:"study",project:o.project,study:o.study,team:o.team,members:o.members,availableRoles:o.availableRoles,studyPermissions:o.studyPermissions,studyRole:o.studyRole,current:"About"},{"study-section":D(()=>[e("div",L,[e("div",E,[e("div",F,[e("div",N,[e("div",R,[A,e("div",z,[H,e("button",{type:"button",onClick:s[0]||(s[0]=(...t)=>r.openStudyDetailsPane&&r.openStudyDetailsPane(...t)),class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},O)])]),e("dd",U,[e("p",null,u(o.study.description),1)])]),e("div",q,[e("div",J,[Q,e("div",W,[X,e("button",{type:"button",onClick:s[1]||(s[1]=(...t)=>r.openStudyDetailsPane&&r.openStudyDetailsPane(...t)),class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},$)])]),e("dd",ee,[e("p",null,[(l(!0),n(_,null,y(o.study.tags,t=>(l(),n("span",{class:"mr-2",key:t.id},[e("span",te,[se,f(" "+u(t.name.en),1)])]))),128))])])]),e("div",oe,[e("div",ie,[le,e("div",ne,[re,e("button",{type:"button",onClick:s[2]||(s[2]=(...t)=>r.openStudyDetailsPane&&r.openStudyDetailsPane(...t)),class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},ce)])]),h(x,{loading:this.loading},null,8,["loading"]),e("div",null,[this.loading?c("",!0):(l(),n("dd",ue,[e("p",null,[f(u(a.license.title)+" ",1),this.study.license_id?(l(),V(v,{key:0,class:"inline h-4 w-4 ml-0",text:a.license.description},null,8,["text"])):c("",!0)])]))])]),e("div",me,[e("div",he,[ge,e("div",_e,[ye,e("button",{type:"button",onClick:s[3]||(s[3]=(...t)=>r.openStudyDetailsPane&&r.openStudyDetailsPane(...t)),class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},ve)])]),e("div",null,[be,e("div",null,[pe,e("div",we,[e("div",ke,[o.study.sample.molecules.length>0?(l(),n("div",Se,[e("ul",Me,[(l(!0),n(_,null,y(o.study.sample.molecules,t=>(l(),n("li",{key:t.STANDARD_INCHI},[e("div",Ce,[Ie,e("div",De,[t&&t.pivot?(l(),n("div",Ve,[e("img",{class:"h-10 w-10 rounded-full bg-gray-400 flex items-center justify-center ring-8 ring-white",src:"https://ui-avatars.com/api/?name="+("0"+t.pivot.percentage_composition).slice(-2)+"%2BUser&color=7F9CF5&background=EBF4FF",alt:""},null,8,Pe)])):c("",!0),e("div",je,[e("div",null,[e("div",Be,[e("a",Te,u(t.STANDARD_INCHI),1)])]),e("div",Le,[e("div",Ee,[e("span",{innerHTML:d.getSVGString(t)},null,8,Fe)])])])])])]))),128))])])):(l(),n("div",Ne,Ae))]),e("div",ze,[e("div",He,[Ge,e("div",Ke,[P(e("input",{onBlur:s[4]||(s[4]=(...t)=>d.loadSmiles&&d.loadSmiles(...t)),id:"smiles",name:"smiles","onUpdate:modelValue":s[5]||(s[5]=t=>a.smiles=t),type:"text",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md"},null,544),[[j,a.smiles]])])]),Oe,Ue,e("div",qe,[e("label",Je," Percentage composition ("+u(a.percentage)+"%) ",1),h(b,{min:0,max:d.getMax,height:10,modelValue:a.percentage,"onUpdate:modelValue":s[6]||(s[6]=t=>a.percentage=t),color:"#000","track-color":"#999"},null,8,["max","modelValue"])]),e("button",{onClick:s[7]||(s[7]=(...t)=>d.saveMolecule&&d.saveMolecule(...t)),type:"button",class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," SAVE ")])]),o.study?(l(),n("div",Qe,[o.study.molecules&&o.study.molecules.length==0?(l(),n("div",We,Ye)):c("",!0),o.study.molecules&&o.study.molecules.length>0?(l(),n("div",Ze,"Mols")):c("",!0)])):c("",!0)])])])])])])]),_:1},8,["project","study","team","members","availableRoles","studyPermissions","studyRole"])])}var st=w(T,[["render",$e]]);export{st as default};
