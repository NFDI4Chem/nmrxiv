import{_ as y,bg as _,o,b as l,e as p,w as v,a as e,d as c,aj as g,bj as x,F as u,r as m,am as w,f as S,g as f,t as n}from"./app.640fc03a.js";import{L as D}from"./LoadingButton.c70cd9d1.js";/* empty css            */const k={props:["study","project","current","team","members","availableRoles","studyPermissions","studyRole","model"],components:{StudyContent:_,LoadingButton:D},setup(){},beforeMount(){this.study.license_id&&(this.loading=!0,axios.get(route("console.license.getLicensebyId",this.study.license_id)).then(a=>{this.license=a.data[0].title}).finally(()=>{this.loading=!1}))},data(){return{autoSaving:!1,selectedDataset:null,currentMolecules:[],selectedSpectraData:null,license:"No license selected",loading:!1}},methods:{updateDataSet(){this.selectedSpectraData!=null&&(this.autoSaving=!0,axios.post("/dashboard/datasets/"+this.selectedDataset.id+"/nmriumInfo",{spectra:this.selectedSpectraData,molecules:this.currentMolecules}).then(a=>{this.autoSaving=!1}))},loadSpectra(){this.selectedDataset==null&&(this.selectedDataset=this.study.datasets[0]);const a=window.frames.datasetNMRiumIframe;if(a){if(this.selectedDataset.nmrium_info){let t={spectra:[JSON.parse(this.selectedDataset.nmrium_info)]};a.postMessage({type:"nmr-wrapper:load",data:t},"*")}else{let t={urls:[this.url+"/download/asc/datasets/"+this.selectedDataset.id+"/"+this.selectedDataset.name+".zip"]};a.postMessage({type:"nmr-wrapper:loadURLs",data:t},"*")}window.addEventListener("message",t=>{t.origin=="https://nmriumdev.nmrxiv.org"&&t.data.type=="nmr-wrapper:dataChange"&&(this.selectedSpectraData=t.data.data.data.find(r=>r.info.type=="NMR Spectrum"),this.currentMolecules=t.data.data.molecules,this.updateDataSet())})}}},computed:{currentStep(){return this.steps.filter(a=>a.status=="current")[0]},url(){return String(this.$page.props.url)},nmriumURL(){return this.$page.props.nmriumURL?String(this.$page.props.nmriumURL+"?workspace=embedded&id="+Math.random()):"http://nmriumdev.nmrxiv.org?workspace=embedded&id="+Math.random()}}},M={class:"px-4 sm:px-6 md:px-0"},R={class:"p-6"},L={for:"location",class:"block text-sm font-medium text-gray-700"},N=S("Select Experiment "),j={key:0,class:"float-right"},V=["value"],P={class:"my-7"},U=["src"],C={key:0},I={role:"list",class:"grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 lg:grid-cols-4 xl:gap-x-8"},B={class:"group block w-full aspect-w-10 aspect-h-7 rounded-lg bg-gray-100 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 focus-within:ring-teal-500 overflow-hidden"},E=["innerHTML"],T={type:"button",class:"absolute inset-0 focus:outline-none"},F={class:"sr-only"},z={class:"mt-2 block text-sm font-medium text-gray-900 truncate pointer-events-none"},H={class:"block text-sm font-medium text-gray-500 pointer-events-none"},O={class:"pt-3"},J=e("label",{for:"about",class:"block text-sm font-medium text-gray-700"}," License ",-1),q={class:"p-1 pr-2 grid grid-cols-2"},A={class:"grid grid-cols-2"},G={class:"p-1 pr-2"},K=e("label",{for:"location",class:"block text-sm font-medium text-gray-700"},"Info",-1),Q={key:0,class:"overflow-hidden ring-1 mt-3 ring-black ring-opacity-5 md:rounded-lg"},W={class:"min-w-full border divide-y divide-gray-300"},X=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Field "),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Value ")])],-1),Y={class:"divide-y divide-gray-200 bg-white"},Z={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},$={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},ee=e("div",{class:"p-1 pr-2"},[e("div",{class:"px-4 py-5 sm:p-6"},[e("div",null,[e("div",{class:"pt-3"},[e("div",null,[e("label",{for:"about",class:"block text-sm font-medium text-gray-700"}," Extraction "),e("div",{class:"mt-1"},[e("textarea",{readonly:"",id:"about",name:"about",rows:"3",class:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-300 rounded-md"})]),e("p",{class:"mt-2 text-sm text-gray-500"}," Describe your extraction protocol. Protocol parameters can be provided below. ")])]),e("div",{class:"mt-3"},[e("label",{for:"about",class:"block text-sm font-medium text-gray-700"}," NMR Sample preparation "),e("div",{class:"mt-1"},[e("textarea",{readonly:"",id:"about",name:"about",rows:"3",class:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-300 rounded-md"})]),e("p",{class:"mt-2 text-sm text-gray-500"}," Describe NMR sample preparation protocol details. Protocol parameters can be provided below. ")])]),e("div",{class:"mt-3"},[e("div",null,[e("label",{for:"about",class:"block text-sm font-medium text-gray-700"}," Data transformation "),e("div",{class:"mt-1"},[e("textarea",{readonly:"",id:"about",name:"about",rows:"3",class:"shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-300 rounded-md"})]),e("p",{class:"mt-2 text-sm text-gray-500"}," Describe any data transformation protocol performed. Protocol parameters can be provided below. ")])])])],-1);function te(a,t,r,se,i,d){const h=f("loading-button"),b=f("study-content");return o(),l("div",null,[p(b,{model:"study",project:r.project,study:r.study,team:r.team,members:r.members,availableRoles:r.availableRoles,studyPermissions:r.studyPermissions,studyRole:r.studyRole,current:"Datasets"},{"study-section":v(()=>[e("div",M,[e("div",R,[e("div",null,[e("label",L,[N,e("small",null,[i.autoSaving?(o(),l("span",j,"Saving...")):c("",!0)])]),g(e("select",{onChange:t[0]||(t[0]=(...s)=>d.loadSpectra&&d.loadSpectra(...s)),"onUpdate:modelValue":t[1]||(t[1]=s=>i.selectedDataset=s),id:"location",name:"location",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md"},[(o(!0),l(u,null,m(r.study.datasets,s=>(o(),l("option",{value:s,key:s.slug},n(s.name),9,V))),128))],544),[[x,i.selectedDataset]])]),e("div",P,[e("iframe",{onLoad:t[2]||(t[2]=s=>d.loadSpectra()),name:"datasetNMRiumIframe",frameborder:"0",allowfullscreen:"",class:"rounded-md border",style:{width:"100%",height:"75vh","max-height":"600px"},src:d.nmriumURL},null,40,U)]),i.currentMolecules.length>0?(o(),l("div",C,[e("ul",I,[(o(!0),l(u,null,m(i.currentMolecules,s=>(o(),l("li",{key:s.key,class:"relative"},[e("div",B,[e("div",{class:"object-cover pointer-events-none group-hover:opacity-75",innerHTML:s.svg},null,8,E),e("button",T,[e("span",F,"View details for "+n(a.file.title),1)])]),e("p",z,n(a.file.title),1),e("p",H,n(a.file.size),1)]))),128))])])):c("",!0),e("div",O,[e("div",null,[J,e("div",q,[e("div",null,[p(h,{loading:this.loading},null,8,["loading"]),this.loading?c("",!0):g((o(),l("input",{key:0,readonly:"","onUpdate:modelValue":t[3]||(t[3]=s=>this.license=s),type:"text",name:"study-name",id:"study-name",class:"block w-full shadow-sm sm:text-sm focus:ring-gray-500 focus:border-gray-500 border-gray-300 rounded-md"},null,512)),[[w,this.license]])])])])]),e("div",A,[e("div",G,[K,i.selectedSpectraData?(o(),l("div",Q,[e("table",W,[X,e("tbody",Y,[(o(!0),l(u,null,m(Object.keys(i.selectedSpectraData.info),s=>(o(),l("tr",{key:s},[e("td",Z,n(s),1),e("td",$,n(i.selectedSpectraData.info[s]),1)]))),128))])])])):c("",!0)]),ee])])])]),_:1},8,["project","study","team","members","availableRoles","studyPermissions","studyRole"])])}var re=y(k,[["render",te]]);export{re as default};
